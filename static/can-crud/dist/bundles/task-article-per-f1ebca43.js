/*when@3.7.7#es6-shim/Promise*/
define("when@3.7.7#es6-shim/Promise",["module","@loader"],function(t,e){e.get("@@global-helpers").prepareGlobal(t.id,[]);var n=e.global.define,o=e.global.require,r='!function(t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):"undefined"!=typeof window?window.Promise=t():"undefined"!=typeof global?global.Promise=t():"undefined"!=typeof self&&(self.Promise=t())}(function(){var t;return function e(t,n,o){function r(u,c){if(!n[u]){if(!t[u]){var f="function"==typeof require&&require;if(!c&&f)return f(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module \'"+u+"\'")}var s=n[u]={exports:{}};t[u][0].call(s.exports,function(e){var n=t[u][1][e];return r(n?n:e)},s,s.exports,e,t,n,o)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<o.length;u++)r(o[u]);return r}({1:[function(t,e,n){var o=t("../lib/decorators/unhandledRejection"),r=o(t("../lib/Promise"));e.exports="undefined"!=typeof global?global.Promise=r:"undefined"!=typeof self?self.Promise=r:r},{"../lib/Promise":2,"../lib/decorators/unhandledRejection":4}],2:[function(e,n,o){!function(t){"use strict";t(function(t){var e=t("./makePromise"),n=t("./Scheduler"),o=t("./env").asap;return e({scheduler:new n(o)})})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"./Scheduler":3,"./env":5,"./makePromise":7}],3:[function(e,n,o){!function(t){"use strict";t(function(){function t(t){this._async=t,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var e=this;this.drain=function(){e._drain()}}return t.prototype.enqueue=function(t){this._queue[this._queueLen++]=t,this.run()},t.prototype.afterQueue=function(t){this._afterQueue[this._afterQueueLen++]=t,this.run()},t.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},t.prototype._drain=function(){for(var t=0;t<this._queueLen;++t)this._queue[t].run(),this._queue[t]=void 0;for(this._queueLen=0,this._running=!1,t=0;t<this._afterQueueLen;++t)this._afterQueue[t].run(),this._afterQueue[t]=void 0;this._afterQueueLen=0},t})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],4:[function(e,n,o){!function(t){"use strict";t(function(t){function e(t){throw t}function n(){}var o=t("../env").setTimer,r=t("../format");return function(t){function i(t){t.handled||(l.push(t),a("Potentially unhandled rejection ["+t.id+"] "+r.formatError(t.value)))}function u(t){var e=l.indexOf(t);e>=0&&(l.splice(e,1),h("Handled previous rejection ["+t.id+"] "+r.formatObject(t.value)))}function c(t,e){p.push(t,e),null===d&&(d=o(f,0))}function f(){for(d=null;p.length>0;)p.shift()(p.shift())}var s,a=n,h=n;"undefined"!=typeof console&&(s=console,a="undefined"!=typeof s.error?function(t){s.error(t)}:function(t){s.log(t)},h="undefined"!=typeof s.info?function(t){s.info(t)}:function(t){s.log(t)}),t.onPotentiallyUnhandledRejection=function(t){c(i,t)},t.onPotentiallyUnhandledRejectionHandled=function(t){c(u,t)},t.onFatalRejection=function(t){c(e,t.value)};var p=[],l=[],d=null;return t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../env":5,"../format":6}],5:[function(e,n,o){!function(t){"use strict";t(function(t){function e(){return"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)}function n(){return"function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver}function o(t){function e(){var t=n;n=void 0,t()}var n,o=document.createTextNode(""),r=new t(e);r.observe(o,{characterData:!0});var i=0;return function(t){n=t,o.data=i^=1}}var r,i="undefined"!=typeof setTimeout&&setTimeout,u=function(t,e){return setTimeout(t,e)},c=function(t){return clearTimeout(t)},f=function(t){return i(t,0)};if(e())f=function(t){return process.nextTick(t)};else if(r=n())f=o(r);else if(!i){var s=t,a=s("vertx");u=function(t,e){return a.setTimer(e,t)},c=a.cancelTimer,f=a.runOnLoop||a.runOnContext}return{setTimer:u,clearTimer:c,asap:f}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{}],6:[function(e,n,o){!function(t){"use strict";t(function(){function t(t){var n="object"==typeof t&&null!==t&&(t.stack||t.message)?t.stack||t.message:e(t);return t instanceof Error?n:n+" (WARNING: non-Error used)"}function e(t){var e=String(t);return"[object Object]"===e&&"undefined"!=typeof JSON&&(e=n(t,e)),e}function n(t,e){try{return JSON.stringify(t)}catch(n){return e}}return{formatError:t,formatObject:e,tryStringify:n}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],7:[function(e,n,o){!function(t){"use strict";t(function(){return function(t){function e(t,e){this._handler=t===_?e:n(t)}function n(t){function e(t){r.resolve(t)}function n(t){r.reject(t)}function o(t){r.notify(t)}var r=new b;try{t(e,n,o)}catch(i){n(i)}return r}function o(t){return S(t)?t:new e(_,new x(y(t)))}function r(t){return new e(_,new x(new P(t)))}function i(){return $}function u(){return new e(_,new b)}function c(t,e){var n=new b(t.receiver,t.join().context);return new e(_,n)}function f(t){return a(K,null,t)}function s(t,e){return a(F,t,e)}function a(t,n,o){function r(e,r,u){u.resolved||h(o,i,e,t(n,r,e),u)}function i(t,e,n){a[t]=e,0===--s&&n.become(new q(a))}for(var u,c="function"==typeof n?r:i,f=new b,s=o.length>>>0,a=new Array(s),p=0;p<o.length&&!f.resolved;++p)u=o[p],void 0!==u||p in o?h(o,c,p,u,f):--s;return 0===s&&f.become(new q(a)),new e(_,f)}function h(t,e,n,o,r){if(U(o)){var i=m(o),u=i.state();0===u?i.fold(e,n,void 0,r):u>0?e(n,i.value,r):(r.become(i),p(t,n+1,i))}else e(n,o,r)}function p(t,e,n){for(var o=e;o<t.length;++o)l(y(t[o]),n)}function l(t,e){if(t!==e){var n=t.state();0===n?t.visit(t,void 0,t._unreport):0>n&&t._unreport()}}function d(t){return"object"!=typeof t||null===t?r(new TypeError("non-iterable passed to race()")):0===t.length?i():1===t.length?o(t[0]):v(t)}function v(t){var n,o,r,i=new b;for(n=0;n<t.length;++n)if(o=t[n],void 0!==o||n in t){if(r=y(o),0!==r.state()){i.become(r),p(t,n+1,r);break}r.visit(i,i.resolve,i.reject)}return new e(_,i)}function y(t){return S(t)?t._handler.join():U(t)?j(t):new q(t)}function m(t){return S(t)?t._handler.join():j(t)}function j(t){try{var e=t.then;return"function"==typeof e?new g(e,t):new q(t)}catch(n){return new P(n)}}function _(){}function w(){}function b(t,n){e.createContext(this,n),this.consumers=void 0,this.receiver=t,this.handler=void 0,this.resolved=!1}function x(t){this.handler=t}function g(t,e){b.call(this),I.enqueue(new E(t,e,this))}function q(t){e.createContext(this),this.value=t}function P(t){e.createContext(this),this.id=++Y,this.value=t,this.handled=!1,this.reported=!1,this._report()}function R(t,e){this.rejection=t,this.context=e}function C(t){this.rejection=t}function O(){return new P(new TypeError("Promise cycle"))}function T(t,e){this.continuation=t,this.handler=e}function Q(t,e){this.handler=e,this.value=t}function E(t,e,n){this._then=t,this.thenable=e,this.resolver=n}function L(t,e,n,o,r){try{t.call(e,n,o,r)}catch(i){o(i)}}function k(t,e,n,o){this.f=t,this.z=e,this.c=n,this.to=o,this.resolver=X,this.receiver=this}function S(t){return t instanceof e}function U(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function H(t,n,o,r){return"function"!=typeof t?r.become(n):(e.enterContext(n),W(t,n.value,o,r),void e.exitContext())}function N(t,n,o,r,i){return"function"!=typeof t?i.become(o):(e.enterContext(o),z(t,n,o.value,r,i),void e.exitContext())}function M(t,n,o,r,i){return"function"!=typeof t?i.notify(n):(e.enterContext(o),A(t,n,r,i),void e.exitContext())}function F(t,e,n){try{return t(e,n)}catch(o){return r(o)}}function W(t,e,n,o){try{o.become(y(t.call(n,e)))}catch(r){o.become(new P(r))}}function z(t,e,n,o,r){try{t.call(o,e,n,r)}catch(i){r.become(new P(i))}}function A(t,e,n,o){try{o.notify(t.call(n,e))}catch(r){o.notify(r)}}function J(t,e){e.prototype=V(t.prototype),e.prototype.constructor=e}function K(t,e){return e}function D(){}function G(){return"undefined"!=typeof process&&null!==process&&"function"==typeof process.emit?function(t,e){return"unhandledRejection"===t?process.emit(t,e.value,e):process.emit(t,e)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(t,e,n){var o=!1;try{var r=new n("unhandledRejection");o=r instanceof n}catch(i){}return o?function(t,o){var r=new n(t,{detail:{reason:o.value,key:o},bubbles:!1,cancelable:!0});return!e.dispatchEvent(r)}:t}(D,self,CustomEvent):D}var I=t.scheduler,B=G(),V=Object.create||function(t){function e(){}return e.prototype=t,new e};e.resolve=o,e.reject=r,e.never=i,e._defer=u,e._handler=y,e.prototype.then=function(t,e,n){var o=this._handler,r=o.join().state();if("function"!=typeof t&&r>0||"function"!=typeof e&&0>r)return new this.constructor(_,o);var i=this._beget(),u=i._handler;return o.chain(u,o.receiver,t,e,n),i},e.prototype["catch"]=function(t){return this.then(void 0,t)},e.prototype._beget=function(){return c(this._handler,this.constructor)},e.all=f,e.race=d,e._traverse=s,e._visitRemaining=p,_.prototype.when=_.prototype.become=_.prototype.notify=_.prototype.fail=_.prototype._unreport=_.prototype._report=D,_.prototype._state=0,_.prototype.state=function(){return this._state},_.prototype.join=function(){for(var t=this;void 0!==t.handler;)t=t.handler;return t},_.prototype.chain=function(t,e,n,o,r){this.when({resolver:t,receiver:e,fulfilled:n,rejected:o,progress:r})},_.prototype.visit=function(t,e,n,o){this.chain(X,t,e,n,o)},_.prototype.fold=function(t,e,n,o){this.when(new k(t,e,n,o))},J(_,w),w.prototype.become=function(t){t.fail()};var X=new w;J(_,b),b.prototype._state=0,b.prototype.resolve=function(t){this.become(y(t))},b.prototype.reject=function(t){this.resolved||this.become(new P(t))},b.prototype.join=function(){if(!this.resolved)return this;for(var t=this;void 0!==t.handler;)if(t=t.handler,t===this)return this.handler=O();return t},b.prototype.run=function(){var t=this.consumers,e=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var n=0;n<t.length;++n)e.when(t[n])},b.prototype.become=function(t){this.resolved||(this.resolved=!0,this.handler=t,void 0!==this.consumers&&I.enqueue(this),void 0!==this.context&&t._report(this.context))},b.prototype.when=function(t){this.resolved?I.enqueue(new T(t,this.handler)):void 0===this.consumers?this.consumers=[t]:this.consumers.push(t)},b.prototype.notify=function(t){this.resolved||I.enqueue(new Q(t,this))},b.prototype.fail=function(t){var e="undefined"==typeof t?this.context:t;this.resolved&&this.handler.join().fail(e)},b.prototype._report=function(t){this.resolved&&this.handler.join()._report(t)},b.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},J(_,x),x.prototype.when=function(t){I.enqueue(new T(t,this))},x.prototype._report=function(t){this.join()._report(t)},x.prototype._unreport=function(){this.join()._unreport()},J(b,g),J(_,q),q.prototype._state=1,q.prototype.fold=function(t,e,n,o){N(t,e,this,n,o)},q.prototype.when=function(t){H(t.fulfilled,this,t.receiver,t.resolver)};var Y=0;J(_,P),P.prototype._state=-1,P.prototype.fold=function(t,e,n,o){o.become(this)},P.prototype.when=function(t){"function"==typeof t.rejected&&this._unreport(),H(t.rejected,this,t.receiver,t.resolver)},P.prototype._report=function(t){I.afterQueue(new R(this,t))},P.prototype._unreport=function(){this.handled||(this.handled=!0,I.afterQueue(new C(this)))},P.prototype.fail=function(t){this.reported=!0,B("unhandledRejection",this),e.onFatalRejection(this,void 0===t?this.context:t)},R.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,B("unhandledRejection",this.rejection)||e.onPotentiallyUnhandledRejection(this.rejection,this.context))},C.prototype.run=function(){this.rejection.reported&&(B("rejectionHandled",this.rejection)||e.onPotentiallyUnhandledRejectionHandled(this.rejection))},e.createContext=e.enterContext=e.exitContext=e.onPotentiallyUnhandledRejection=e.onPotentiallyUnhandledRejectionHandled=e.onFatalRejection=D;var Z=new _,$=new e(_,Z);return T.prototype.run=function(){this.handler.join().when(this.continuation)},Q.prototype.run=function(){var t=this.handler.consumers;if(void 0!==t)for(var e,n=0;n<t.length;++n)e=t[n],M(e.progress,this.value,this.handler,e.receiver,e.resolver)},E.prototype.run=function(){function t(t){o.resolve(t)}function e(t){o.reject(t)}function n(t){o.notify(t)}var o=this.resolver;L(this._then,this.thenable,t,e,n)},k.prototype.fulfilled=function(t){this.f.call(this.c,this.z,t,this.to)},k.prototype.rejected=function(t){this.to.reject(t)},k.prototype.progress=function(t){this.to.notify(t)},e}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}]},{},[1])(1)});';return e.global.define=void 0,e.global.module=void 0,e.global.exports=void 0,e.__exec({source:r,address:t.uri}),e.global.require=o,e.global.define=n,e.get("@@global-helpers").retrieveGlobal(t.id,void 0)});
/*can-connect@0.5.5#helpers/helpers*/
define("can-connect@0.5.5#helpers/helpers",function(r,n,t){r("when/es6-shim/Promise");var e,o=/\{([^\}]+)\}/g,u=function(r){return/^f|^o/.test(typeof r)},i=Array.prototype;t.exports=e={extend:function(r,n){for(var t in n)r[t]=n[t];return r},deferred:function(){var r={};return r.promise=new Promise(function(n,t){r.resolve=n,r.reject=t}),r},each:function(r,n){for(var t in r)n(r[t],t);return r},forEach:i.forEach||function(r){for(var n=0,t=this.length;t>n;n++)r(this[n],n)},map:i.map||function(r){var n=[],t=this;return e.forEach.call(t,function(e,o){n.push(r(e,o,t))}),n},indexOf:i.indexOf||function(r){for(var n=0,t=this.length;t>n;n++)if(this[n]===r)return n;return-1},getObject:function(r,n,t){var e=n[r];return t&&delete n[r],e},sub:function(r,n,t){var i=[];return r=r||"",i.push(r.replace(o,function(r,o){var c=e.getObject(o,n,t);return void 0===c||null===c?(i=null,""):u(c)&&i?(i.push(c),""):""+c})),null===i?i:i.length<=1?i[0]:i},keys:Object.keys||function(){var r=Object.prototype.hasOwnProperty,n=!{toString:null}.propertyIsEnumerable("toString"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e=t.length;return function(o){if("object"!=typeof o&&"function"!=typeof o||null===o)throw new TypeError("Object.keys called on non-object");var u=[];for(var i in o)r.call(o,i)&&u.push(i);if(n)for(var c=0;e>c;c++)r.call(o,t[c])&&u.push(t[c]);return u}}(),defineProperty:function(){try{var r={};return Object.defineProperty(r,"foo",{}),Object.defineProperty}catch(n){return function(r,n,t){t.value&&(r[n]=t.value)}}}(),isArray:Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)},bind:function(){return Function.prototype.bind?function(r,n){return r.bind(n)}:function(r,n){return function(){return r.apply(n,arguments)}}}()}});
/*can-connect@0.5.5#can-connect*/
define("can-connect@0.5.5#can-connect",function(n,e,r){var t=n("./helpers/"),a=function(n,e){n=t.map.call(n,function(n,e){var r;return"string"==typeof n?(r=t.indexOf.call(a.order,n),n=o[n]):n.isBehavior||(n=a.behavior(n)),{originalIndex:e,sortedIndex:r,behavior:n}}).sort(function(n,e){return null!=n.sortedIndex&&null!=e.sortedIndex?n.sortedIndex-e.sortedIndex:n.originalIndex-e.originalIndex}),n=t.map.call(n,function(n){return n.behavior});var r=i(a.behavior("options",function(){return e})());return t.forEach.call(n,function(n){r=n(r)}),r.init&&r.init(),r};a.order=["data-localstorage-cache","data-url","data-parse","cache-requests","data-combine-requests","constructor","constructor-store","can-map","fall-through-cache","data-inline-cache","data-worker","data-callbacks-cache","data-callbacks","constructor-callbacks-once"],a.behavior=function(n,e){"string"!=typeof n&&(e=n,n=void 0);var r=function(r){var a=function(){};a.name=n,a.prototype=r;var o=new a,i="function"==typeof e?e.apply(o,arguments):e;return t.extend(o,i),o.__behaviorName=n,o};return n&&(r.name=n,o[n]=r),r.isBehavior=!0,r};var o={},i=a.behavior("base",function(n){return{id:function(n){var e=[],r=this.algebra;if(r&&r.clauses&&r.clauses.id)for(var t in r.clauses.id)e.push(n[t]);return this.idProp&&!e.length&&e.push(n[this.idProp]),e.length||e.push(n.id),e.length>1?e.join("@|@"):e[0]},idProp:n.idProp||"id",listSet:function(n){return n[this.listSetProp]},listSetProp:"__listSet",init:function(){}}});a.base=i,r.exports=a});
/*can-connect@0.5.5#helpers/ajax*/
define("can-connect@0.5.5#helpers/ajax",function(e,t,n){e("when/es6-shim/Promise");var r=e("can-connect/helpers/"),a=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")}],o=null,s={};s.xhr=function(){if(null!=o)return o();for(var e=0,t=a.length;t>e;e++)try{var n=a[e],r=n();if(null!=r)return o=n,r}catch(s){continue}return function(){}},s._xhrResp=function(e){switch(e.getResponseHeader("Content-Type").split(";")[0]){case"text/xml":return e.responseXML;case"text/json":case"application/json":case"text/javascript":case"application/javascript":case"application/x-javascript":return JSON.parse(e.responseText);default:return e.responseText}},s._formData=function(e){var t=[],n=/%20/g;for(var r in e)t.push(encodeURIComponent(r).replace(n,"+")+"="+encodeURIComponent(e[r].toString()).replace(n,"+"));return t.join("&")},n.exports=function(e){var t,n=s.xhr(),a=0,o=r.deferred();e=r.extend({userAgent:"XMLHttpRequest",lang:"en",type:"GET",data:null,dataType:"application/x-www-form-urlencoded"},e),e.timeout&&(t=setTimeout(function(){n.abort(),e.timeoutFn&&e.timeoutFn(e.url)},e.timeout)),n.onreadystatechange=function(){4===n.readyState?(t&&clearTimeout(t),n.status<300?e.success&&e.success(s._xhrResp(n)):e.error&&e.error(n,n.status,n.statusText),e.complete&&e.complete(n,n.statusText),200===n.status?o.resolve(JSON.parse(n.responseText)):o.reject(JSON.parse(n.responseText))):e.progress&&e.progress(++a)};var c=e.url,i=null,u="POST"===e.type||"PUT"===e.type;if(!u&&e.data&&(c+="?"+s._formData(e.data)),n.open(e.type,c),u){var p=e.dataType.indexOf("json")>=0;i=p?JSON.stringify(e.data):s._formData(e.data),n.setRequestHeader("Content-Type",p?"application/json":"application/x-www-form-urlencoded")}return n.send(i),o.promise}});
/*can-connect@0.5.5#data/url/url*/
define("can-connect@0.5.5#data/url/url",function(t,e,a){var r=t("can-connect/helpers/").isArray,p=t("can-connect"),n=t("can-connect/helpers/"),o=t("can-connect/helpers/ajax");a.exports=p.behavior("data-url",function(t){var e={};return n.each(i,function(a,r){e[r]=function(e){if("object"==typeof this.url){if("function"==typeof this.url[a.prop])return this.url[a.prop](e);if(this.url[a.prop])return s(this.url[a.prop],e,a.type,this.ajax||o)}var p="string"==typeof this.url?this.url:this.url.resource;return p&&this.idProp?s(c(p,this.idProp,a.prop),e,a.type,this.ajax||o):t[r].call(this,e)}}),e});var i={getListData:{prop:"getListData",type:"GET"},getData:{prop:"getData",type:"GET"},createData:{prop:"createData",type:"POST"},updateData:{prop:"updateData",type:"PUT"},destroyData:{prop:"destroyData",type:"DELETE"}},s=function(t,e,a,p){var o={};if("string"==typeof t){var i=t.split(/\s+/);o.url=i.pop(),i.length&&(o.type=i.pop())}else n.extend(o,t);return o.data="object"!=typeof e||r(e)?e:n.extend(o.data||{},e),o.url=n.sub(o.url,o.data,!0),p(n.extend({type:a||"post",dataType:"json"},o))},c=function(t,e,a){var r=t.replace(/\/+$/,"");return"getListData"===a||"createData"===a?r:r+"/{"+e+"}"}});
/*can-connect@0.5.5#helpers/weak-reference-map*/
define("can-connect@0.5.5#helpers/weak-reference-map",function(e,t,n){var r=e("can-connect/helpers/"),i=function(){this.set={}};r.extend(i.prototype,{has:function(e){return!!this.set[e]},addReference:function(e,t){var n=this.set[e];n||(n=this.set[e]={item:t,referenceCount:0,key:e}),n.referenceCount++},deleteReference:function(e){var t=this.set[e];t&&(t.referenceCount--,0===t.referenceCount&&delete this.set[e])},get:function(e){var t=this.set[e];return t?t.item:void 0},forEach:function(e){for(var t in this.set)e(this.set[t].item,t)}}),n.exports=i});
/*can-connect@0.5.5#helpers/overwrite*/
define("can-connect@0.5.5#helpers/overwrite",function(e,n,r){r.exports=function(e,n,r){for(var i in e)i===r||i in n||delete e[i];for(i in n)e[i]=n[i];return e}});
/*can-connect@0.5.5#helpers/id-merge*/
define("can-connect@0.5.5#helpers/id-merge",function(e,l,n){var c=e("can-connect/helpers/").map;n.exports=function(e,l,n,t){for(var i=0,a=0;i<e.length&&a<l.length;){var p=e[i],s=l[a],h=n(p),r=n(s);if(n(p)!==n(s))if(a+1<l.length&&n(l[a+1])===h)e.splice(i,0,t(l[a])),i++,a++;else{if(!(i+1<e.length&&n(e[i+1])===r))return e.splice.apply(e,[i,e.length-i].concat(c.call(l.slice(a),t))),e;e.splice(i,1),i++,a++}else i++,a++}(a!==l.length||i!==e.length)&&e.splice.apply(e,[i,e.length-i].concat(c.call(l.slice(a),t)))}});
/*can-connect@0.5.5#helpers/wait*/
define("can-connect@0.5.5#helpers/wait",function(n,t,a){function e(n){if(null==n)return n;var t={},a=[];for(var e in n)a.push(e);return a.sort(),i.each(a,function(a){t[a]=n[a]}),JSON.stringify(t)}function r(n,t,a){if("undefined"!=typeof canWait&&canWait.data){var r=canWait(function(n){var r={},i=r[t]={};return i[e(a)]="function"==typeof n.serialize?n.serialize():n,canWait.data({pageData:r}),n});return n.then(null,r),n.then(r)}return n}var i=n("can-connect/helpers/");a.exports=r});
/*can-connect@0.5.5#constructor/constructor*/
define("can-connect@0.5.5#constructor/constructor",function(t,e,n){var i=t("can-connect/helpers/"),r=i.bind,a=i.isArray,s=t("can-connect"),c=t("can-connect/helpers/weak-reference-map"),h=t("can-connect/helpers/overwrite"),o=t("can-connect/helpers/id-merge"),i=t("can-connect/helpers/"),d=t("can-connect/helpers/wait");n.exports=s.behavior("constructor",function(t){var e={cidStore:new c,_cid:0,get:function(t){var e=this;return d(this.getData(t).then(function(t){return e.hydrateInstance(t)}),this.name,t)},getList:function(t){var e=this;return d(this.getListData(t).then(function(n){return e.hydrateList(n,t)}),this.name,t)},hydrateList:function(t,e){a(t)&&(t={data:t});for(var n=[],i=0;i<t.data.length;i++)n.push(this.hydrateInstance(t.data[i]));if(t.data=n,this.list)return this.list(t,e);var r=t.data.slice(0);return r[this.listSetProp||"__listSet"]=e,r},hydrateInstance:function(t){return this.instance?this.instance(t):i.extend({},t)},save:function(t){var e=this.serializeInstance(t),n=this.id(t),i=this;if(void 0===n){var r=this._cid++;return this.cidStore.addReference(r,t),this.createData(e,r).then(function(e){return void 0!==e&&i.createdInstance(t,e),i.cidStore.deleteReference(r,t),t})}return this.updateData(e).then(function(e){return void 0!==e&&i.updatedInstance(t,e),t})},destroy:function(t){var e=this.serializeInstance(t),n=this;return this.destroyData(e).then(function(e){return void 0!==e&&n.destroyedInstance(t,e),t})},createdInstance:function(t,e){i.extend(t,e)},updatedInstance:function(t,e){h(t,e,this.idProp)},updatedList:function(t,e,n){for(var i=[],a=0;a<e.data.length;a++)i.push(this.hydrateInstance(e.data[a]));o(t,i,r(this.id,this),r(this.hydrateInstance,this))},destroyedInstance:function(t,e){h(t,e,this.idProp)},serializeInstance:function(t){return i.extend({},t)},serializeList:function(t){var e=this;return i.map.call(t,function(t){return e.serializeInstance(t)})},isNew:function(t){var e=this.id(t);return!(e||0===e)}};return e})});
/*can-set@0.5.6#src/helpers*/
define("can-set@0.5.6#src/helpers",function(r,n,t){var e,i=function(){};t.exports=e={extend:function(r,n){for(var t in n)r[t]=n[t];return r},isArrayLike:function(r){return r&&"object"==typeof r&&"number"==typeof r.length&&r.length>=0&&(0===r.length||r.length-1 in r)},each:function(r,n){if(e.isArrayLike(r))for(var t=0;t<r.length&&n(r[t],t)!==!1;t++);else for(var i in r)if(r.hasOwnProperty(i)&&n(r[i],i)===!1)break;return r},eachInUnique:function(r,n,t,i,o){var f,u=e.extend({},t);for(var a in r){if(f=n(r[a],t[a],r,t,a),void 0!==f)return f;delete u[a]}for(a in u)if(f=i(void 0,t[a],r,t,a),void 0!==f)return f;return o},makeArray:function(r){var n=[];return e.each(r,function(r){n.push(r)}),n},doubleLoop:function(r,n){"function"==typeof n&&(n={iterate:n});for(var t=0;t<r.length;){n.start&&n.start(r[t]);for(var e=t+1;e<r.length;)n.iterate(r[e],e,r[t],t)===!1?r.splice(e,1):e++;n.end&&n.end(r[t]),t++}},identityMap:function(r){var n={};return e.each(r,function(r){n[r]=1}),n},arrayUnionIntersectionDifference:function(r,n){var t={},i=[],o=[],f=r.slice(0);return e.each(r,function(r){t[r]=!0,o.push(r)}),e.each(n,function(r){if(t[r]){i.push(r);var n=e.indexOf.call(f,r);-1!==n&&f.splice(n,1)}else o.push(r)}),{intersection:i,union:o,difference:f}},arraySame:function(r,n){if(r.length!==n.length)return!1;for(var t=e.identityMap(r),i=0;i<n.length;i++){var o=t[n[i]];if(!o)return!1;if(o>1)return!1;t[n[i]]++}return!0},indexOf:Array.prototype.indexOf||function(r){for(var n=0,t=this.length;t>n;n++)if(this[n]===r)return n;return-1},map:Array.prototype.map||function(r){for(var n=[],t=0,e=this.length;e>t;t++)n.push(r(this[t],t,this));return n},filter:Array.prototype.filter||function(r){for(var n=[],t=0,e=this.length;e>t;t++)r(this[t],t,this)&&n.push(this[t]);return n},isEmptyObject:function(r){var n;for(n in r)if(r.hasOwnProperty(n))break;return void 0===n},ignoreType:new i,firstProp:function(r){for(var n in r)return n},last:function(r){return r[r.length-1]},index:function(r,n,t){if(!n||!n.length)return void 0;if(-1===r(t,n[0]))return 0;if(1===r(t,e.last(n)))return n.length;for(var i=0,o=n.length;o>i;){var f=i+o>>>1,u=n[f],a=r(t,u);-1===a?o=f:i=f+1}return o},defaultSort:function(r,n,t){var e,i=r.split(" "),o=i[0],f=n[o],u=t[o],a=i[1]||"";return a="desc"===a.toLowerCase(),a&&(e=f,f=u,u=e),u>f?-1:f>u?1:0}}});
/*can-set@0.5.6#src/clause*/
define("can-set@0.5.6#src/clause",function(e,t,r){var n=e("./helpers"),a={};r.exports=a,a.TYPES=["where","order","paginate","id"],n.each(a.TYPES,function(e){var t=e.charAt(0).toUpperCase()+e.substr(1);a[t]=function(e){n.extend(this,e)},a[t].type=e})});
/*can-set@0.5.6#src/compare*/
define("can-set@0.5.6#src/compare",function(e,n,r){var t,i=e("./helpers"),o=function(e,n,r,t,i,o,u){for(var f=u.checks,c=0;c<f.length;c++){var a=f[c](e,n,r,t,i,o||{},u);if(void 0!==a)return a}return u["default"]},u=function(e,n,r,t,i,o,u){var f;if(i in r){if(i in t)return!1}else f="subsetB";return i in t||(f="subsetA"),void("subsetB"===f?u.result[i]=n:u.result[i]=e)},f=function(e,n){return function(n,r,t,i,o,u,f){var c=e.apply(this,arguments);return c===!0?(void 0===o||o in f.result||(f.result[o]=n),!0):c}};r.exports=t={equal:function(e,n,r,i,u,f,c){return c.checks=[t.equalComparesType,t.equalBasicTypes,t.equalArrayLike,t.equalObject],c["default"]=!1,o(e,n,r,i,u,f,c)},equalComparesType:function(e,n,r,t,i,o,u){if("function"==typeof o){var f=o(e,n,r,t,i,u);if("boolean"==typeof f)return f;if(f&&"object"==typeof f){if("intersection"in f&&!("difference"in f)){var c=o(n,e,t,r,i,u);return"intersection"in c&&!("difference"in c)}return!1}return f}},equalBasicTypes:function(e,n,r,t,o,u,f){return null===e||null===n?e===n:e instanceof Date||n instanceof Date?e===n:-1===f.deep?"object"==typeof e||e===n:typeof e!=typeof n||i.isArrayLike(e)!==i.isArrayLike(n)?!1:e===n?!0:void 0},equalArrayLike:function(e,n,r,t,u,f,c){if(i.isArrayLike(e)&&i.isArrayLike(n)){if(e.length!==n.length)return!1;for(var a=0;a<e.length;a++){var s=void 0===f[a]?f["*"]:f[a];if(!o(e[a],n[a],e,n,a,s,c))return!1}return!0}},equalObject:function(e,n,r,t,u,f,c){var a=typeof e;if("object"===a||"function"===a){var s=i.extend({},n);c.deep===!1&&(c.deep=-1);for(var p in e){var y=void 0===f[p]?f["*"]:f[p];if(!o(e[p],n[p],e,n,p,y,c))return!1;delete s[p]}for(p in s)if(void 0===f[p]||!o(void 0,n[p],e,n,p,f[p],c))return!1;return!0}},subset:function(e,n,r,i,u,f,c){return c.checks=[t.subsetComparesType,t.equalBasicTypes,t.equalArrayLike,t.subsetObject],c.getSubsets=[],c["default"]=!1,o(e,n,r,i,u,f,c)},subsetObject:function(e,n,r,t,u,f,c){var a=typeof e;return"object"===a||"function"===a?i.eachInUnique(e,function(e,n,r,t,i){var u=void 0===f[i]?f["*"]:f[i];return!o(e,n,r,t,i,u,c)&&i in t?!1:void 0},n,function(e,n,r,t,i){var u=void 0===f[i]?f["*"]:f[i];return o(e,n,r,t,i,u,c)?void 0:!1},!0):void 0},subsetComparesType:function(e,n,r,t,o,u,f){if("function"==typeof u){var c=u(e,n,r,t,o,f);if("boolean"==typeof c)return c;if(c&&"object"==typeof c){if(c.getSubset&&-1===i.indexOf.call(f.getSubsets,c.getSubset)&&f.getSubsets.push(c.getSubset),c.intersection===i.ignoreType||c.difference===i.ignoreType)return!0;if("intersection"in c&&!("difference"in c)){var a=u(n,e,t,r,o,f);return"intersection"in a}return!1}return c}},properSupersetObject:function(e,n,r,t,u,f,c){var a=typeof n,s=!1;if("object"===a||"function"===a){var p=i.extend({},e);c.deep===!1&&(c.deep=-1);for(var y in n){var l=void 0===f[y]?f["*"]:f[y],d=o(e[y],n[y],e,n,y,l,c);if(d===i.ignoreType);else if(y in e&&!c.performedDifference){if(!d)return!1}else s=!0;delete p[y]}for(y in p)if(void 0===f[y]||!o(e[y],void 0,e,n,y,f[y],c))return!1;return s}},properSubsetComparesType:function(e,n,r,t,i,o,u){if("function"==typeof o){var f=o(e,n,r,t,i,u);if("boolean"==typeof f)return f;if(f&&"object"==typeof f){if("intersection"in f&&!("difference"in f)){var c=o(n,e,t,r,i,u);return"intersection"in c&&"difference"in c}return!1}return f}},difference:function(e,n,r,i,u,c,a){a.result={},a.performedDifference=0,a.checks=[t.differenceComparesType,f(t.equalBasicTypes,"equalBasicTypes"),f(t.equalArrayLike,"equalArrayLike"),f(t.properSupersetObject,"properSubsetObject")],a["default"]=!0;var s=o(e,n,r,i,u,c,a);return s===!0&&a.performedDifference?a.result:s},differenceComparesType:function(e,n,r,o,u,f,c){if("function"==typeof f){var a=f(e,n,r,o,u,c);if("boolean"==typeof a)return a===!0?(c.result[u]=e,!0):a;if(a&&"object"==typeof a){if("difference"in a)return a.difference===i.ignoreType?i.ignoreType:null!=a.difference?(c.result[u]=a.difference,c.performedDifference++,!0):!0;if(!t.equalComparesType.apply(this,arguments))return!1;c.performedDifference++,c.result[u]=a.union}}},union:function(e,n,r,i,u,c,a){a.result={},a.performedUnion=0,a.checks=[t.unionComparesType,f(t.equalBasicTypes,"equalBasicTypes"),f(t.unionArrayLike,"unionArrayLike"),f(t.unionObject,"unionObject")],a.getUnions=[],a["default"]=!1;var s=o(e,n,r,i,u,c,a);return s===!0?a.result:!1},unionComparesType:function(e,n,r,t,o,u,f){if("function"==typeof u){var c=u(e,n,r,t,o,f);if("boolean"==typeof c)return c===!0?(f.result[o]=e,!0):c;if(c&&"object"==typeof c&&(c.getUnion&&-1===i.indexOf.call(f.getUnions,c.getUnion)&&f.getUnions.push(c.getUnion),"union"in c))return c.union===i.ignoreType?c.union:(void 0!==c.union&&(f.result[o]=c.union),f.performedUnion++,!0)}},unionObject:function(e,n,r,t,u,f,c){var a=function(e,n,r,t,i){var u=void 0===f[i]?f["*"]:f[i];if(!o(e,n,r,t,i,u,c)){var a;return i in r||(a="subsetB"),i in t||(a="subsetA"),a?(c.subset||(c.subset=a),c.subset===a?void 0:!1):!1}},s=typeof e;return"object"===s||"function"===s?i.eachInUnique(e,a,n,a,!0):void 0},unionArrayLike:function(e,n,r,o,u,f,c){if(i.isArrayLike(e)&&i.isArrayLike(n)){var a=i.makeArray(e).concat(i.makeArray(n));return i.doubleLoop(a,function(e,n,i,u){var c=!t.equal(i,e,r,o,void 0,f["*"],{"default":!1});return c}),c.result[u]=a,!0}},count:function(e,n,r,i,u,f,c){return c.checks=[t.countComparesType,t.equalBasicTypes,t.equalArrayLike,t.loopObject],c["default"]=!1,o(e,n,r,i,u,f,c),"number"==typeof c.count?c.count:1/0},countComparesType:function(e,n,r,t,i,o,u){if("function"==typeof o){var f=o(e,n,r,t,i,u);if("boolean"==typeof f)return!0;if(f&&"object"==typeof f)return"number"==typeof f.count&&("count"in u&&f.count!==u.count?u.count=1/0:u.count=f.count),!0}},loopObject:function(e,n,r,t,u,f,c){var a=typeof e;return"object"===a||"function"===a?(i.each(e,function(r,t){var i=void 0===f[t]?f["*"]:f[t];o(r,n[t],e,n,t,i,c)}),!0):void 0},intersection:function(e,n,r,i,u,c,a){a.result={},a.performedIntersection=0,a.checks=[t.intersectionComparesType,f(t.equalBasicTypes,"equalBasicTypes"),f(t.intersectionArrayLike,"intersectionArrayLike"),t.intersectionObject],a["default"]=!1;var s=o(e,n,r,i,u,c,a);return s===!0?a.result:!1},intersectionComparesType:function(e,n,r,t,i,o,u){if("function"==typeof o){var f=o(e,n,r,t,i,u);if("boolean"==typeof f)return f===!0?(u.result[i]=e,!0):f;if(f&&"object"==typeof f&&"intersection"in f)return void 0!==f.intersection&&(u.result[i]=f.intersection),u.performedIntersection++,!0}},intersectionObject:function(e,n,r,t,f,c,a){var s=function(e,n,r,t,i){var f=void 0===c[i]?c["*"]:c[i];return o(e,n,r,t,i,f,a)?void 0:u(e,n,r,t,i,c,a)},p=typeof e;return"object"===p||"function"===p?i.eachInUnique(e,s,n,s,!0):void 0},intersectionArrayLike:function(e,n,r,o,u,f,c){if(i.isArrayLike(e)&&i.isArrayLike(n)){var a=[];return i.each(i.makeArray(e),function(e){for(var i=0;i<n.length;i++)if(t.equal(e,n[i],r,o,void 0,f["*"],{"default":!1})){a.push(e);break}}),c.result[u]=a,!0}}}});
/*can-set@0.5.6#src/get*/
define("can-set@0.5.6#src/get",function(e,r,t){var a=e("./compare"),n=e("./helpers"),s=function(e,r,t){return n.filter.call(e,function(e){var n=a.subset(e,r,void 0,void 0,void 0,t,{});return n})};t.exports={subsetData:function(e,r,t,i){var o=i.getClauseProperties(e),u=i.getClauseProperties(r),d={},l=s(t,o.where,i.clauses.where);if(l.length&&(o.enabled.order||u.enabled.order)){d={};var c=n.firstProp(o.order),g=i.clauses.order[c];l=l.sort(function(r,t){return g(e[c],r,t)})}return l.length&&(o.enabled.paginate||u.enabled.paginate)&&(d={},a.subset(o.paginate,u.paginate,void 0,void 0,void 0,i.clauses.paginate,d),n.each(d.getSubsets,function(t){l=t(e,r,l,i,d)})),l}}});
/*can-set@0.5.6#src/set-core*/
define("can-set@0.5.6#src/set-core",function(e,t,r){function i(e,t){if("string"==typeof t){var r=t;t={fromSet:function(e,t){return e[r]||{}},toSet:function(e,t){return e[r]=t,e}}}this.clause=e,a.extend(this,t)}var a=e("./helpers"),n=e("./clause"),s=e("./compare"),o=e("./get"),u=function(){var e=this.clauses={where:{},order:{},paginate:{},id:{}};this.translators={where:new i("where",{fromSet:function(e,t){return t},toSet:function(e,t){return a.extend(e,t)}})};var t=this;a.each(arguments,function(r){r&&(r instanceof i?t.translators[r.clause]=r:a.extend(e[r.constructor.type||"where"],r))})};u.make=function(e,t){return e instanceof u?e:new u(e,t)},a.extend(u.prototype,{getClauseProperties:function(e,t){t=t||{};var r=a.extend({},e),i=this.clauses,n=["order","paginate","id"],s={enabled:{where:!0,order:!1,paginate:!1,id:!1}};return t.omitClauses&&(n=a.arrayUnionIntersectionDifference(n,t.omitClauses).difference),a.each(n,function(e){var t,n={};for(t in i[e])t in r&&(n[t]=r[t],delete r[t]);s[e]=n,s.enabled[e]=!a.isEmptyObject(n)}),s.where=t.isProperties?r:this.translators.where.fromSet(e,r),s},getDifferentClauseTypes:function(e,t){var r=this,i=[];return a.each(n.TYPES,function(a){r.evaluateOperator(s.equal,e[a],t[a],{isProperties:!0},{isProperties:!0})||i.push(a)}),i},updateSet:function(e,t,r,i){return r&&"object"==typeof r&&i!==!1?(e=this.translators[t]?this.translators.where.toSet(e,r):a.extend(e,r),!0):r&&void 0===i?void 0:!1},evaluateOperator:function(e,t,r,i,n,o){i=i||{},n=n||{},o=a.extend({evaluateWhere:e,evaluatePaginate:e,evaluateOrder:e,shouldEvaluatePaginate:function(e,t){return e.enabled.paginate||t.enabled.paginate},shouldEvaluateOrder:function(e,t){return e.enabled.order&&s.equal(e.order,t.order,void 0,void 0,void 0,{},{})}},o||{});var u,d=this.getClauseProperties(t,i),l=this.getClauseProperties(r,n),c={},h=o.evaluateWhere(d.where,l.where,void 0,void 0,void 0,this.clauses.where,{});return u=this.updateSet(c,"where",h,u),h&&o.shouldEvaluatePaginate(d,l)?(o.shouldEvaluateOrder(d,l)&&(h=o.evaluateOrder(d.order,l.order,void 0,void 0,void 0,{},{}),u=this.updateSet(c,"order",h,u)),h&&(h=o.evaluatePaginate(d.paginate,l.paginate,void 0,void 0,void 0,this.clauses.paginate,{}),u=this.updateSet(c,"paginate",h,u))):h&&o.shouldEvaluateOrder(d,l)&&(h=e(d.order,l.order,void 0,void 0,void 0,{},{}),u=this.updateSet(c,"order",h,u)),h&&u?c:h},equal:function(e,t){return this.evaluateOperator(s.equal,e,t)},subset:function(e,t){var r,i=this.getClauseProperties(e),a=this.getClauseProperties(t),n=!0;return a.enabled.paginate&&(i.enabled.order||a.enabled.order)&&(n=s.equal(i.order,a.order,void 0,void 0,void 0,{},{})),r=n?this.evaluateOperator(s.subset,e,t):!1},properSubset:function(e,t){return this.subset(e,t)&&!this.equal(e,t)},difference:function(e,t){var r,i=this.getClauseProperties(e),a=this.getClauseProperties(t),n=this.getDifferentClauseTypes(i,a);switch(n.length){case 0:r=!1;break;case 1:var o=n[0];r=s.difference(i[o],a[o],void 0,void 0,void 0,this.clauses[o],{}),this.translators[o]&&"object"==typeof r&&(r=this.translators[o].toSet({},r))}return r},union:function(e,t){return this.evaluateOperator(s.union,e,t)},intersection:function(e,t){return this.evaluateOperator(s.intersection,e,t)},count:function(e){return this.evaluateOperator(s.count,e,{})},has:function(e,t){var r,i=this.getClauseProperties(e),a=this.getClauseProperties(t,{isProperties:!0}),n=!0;return(a.enabled.paginate||i.enabled.paginate)&&(a.enabled.order||i.enabled.order)&&(n=s.equal(a.order,i.order,void 0,void 0,void 0,{},{})),r=n?this.evaluateOperator(s.subset,t,e,{isProperties:!0},void 0):!1},index:function(e,t,r){var i,n,s=this.getClauseProperties(e),o=a.firstProp(s.order);return o?(i=this.clauses.order[o],n=e[o],a.index(function(e,t){return i(n,e,t)},t,r)):(o=a.firstProp(this.clauses.id),o?(i=a.defaultSort,n=o,a.index(function(e,t){return i(n,e,t)},t,r)):void 0)},getSubset:function(e,t,r){var i=this.getClauseProperties(e),n=this.getClauseProperties(t),s=this.subset(a.extend({},i.where,i.paginate),a.extend({},n.where,n.paginate));return s?o.subsetData(e,t,r,this):void 0},getUnion:function(e,t,r,i){var n,o=this.getClauseProperties(e),u=this.getClauseProperties(t),d=this;if(this.subset(e,t))return i;if(this.subset(t,e))return r;var l;if(o.enabled.paginate||u.enabled.paginate){n={};var c=s.union(o.paginate,u.paginate,void 0,void 0,void 0,this.clauses.paginate,n);if(!c)return;a.each(n.getUnions,function(a){var s=a(e,t,r,i,d,n);r=s[0],i=s[1]}),l=r.concat(i)}else l=r.concat(i);if(l.length&&o.enabled.order&&s.equal(o.order,u.order,void 0,void 0,void 0,{},{})){n={};var h=a.firstProp(o.order),p=d.clauses.order[h];l=l.sort(function(t,r){return p(e[h],t,r)})}return l}});var d=function(e,t){return function(){var r=a.makeArray(arguments).slice(0,t),i=u.make(arguments[t]);return i[e].apply(i,r)}};r.exports={Algebra:u,Translate:i,difference:d("difference",2),equal:d("equal",2),subset:d("subset",2),properSubset:d("properSubset",2),union:d("union",2),intersection:d("intersection",2),count:d("count",1),has:d("has",2),index:d("index",3),getSubset:d("getSubset",3),getUnion:d("getUnion",4)}});
/*can-set@0.5.6#src/comparators*/
define("can-set@0.5.6#src/comparators",function(n,e,t){var i=n("./helpers"),r=n("./clause"),o=function(n,e){return n>=e[0]&&n<=e[1]},u=function(n,e,t,i){return{sAv1:+n[t],sAv2:+n[i],sBv1:+e[t],sBv2:+e[i]}},c=function(n,e,t,i){var r=u(n,e,t,i),c=r.sAv1,f=r.sAv2,s=r.sBv1,a=r.sBv2,v=f-c+1,d={difference:[a+1,f],intersection:[c,a],union:[s,f],count:v,meta:"after"},l={difference:[c,s-1],intersection:[s,f],union:[c,a],count:v,meta:"before"};return c===s&&f===a?{intersection:[c,f],union:[c,f],count:v,meta:"equal"}:c===s&&f>a?d:f===a&&s>c?l:o(c,[s,a])&&o(f,[s,a])?{intersection:[c,f],union:[s,a],count:v,meta:"subset"}:o(s,[c,f])&&o(a,[c,f])?{intersection:[s,a],difference:[null,null],union:[c,f],count:v,meta:"superset"}:s>c&&o(f,[s,a])?l:c>s&&o(a,[c,f])?d:f===s-1?{difference:[c,f],union:[c,a],count:v,meta:"disjoint-before"}:a===c-1?{difference:[c,f],union:[s,f],count:v,meta:"disjoint-after"}:isNaN(v)?void 0:{count:v,meta:"disjoint"}},f=function(n,e){return n?(i.isArrayLike(n)||(n=[n]),n.length?n:e):e};t.exports={"enum":function(n,e){var t=new r.Where({});return t[n]=function(n,t,r,o){n=f(n,e),t=f(t,e);var u=i.arrayUnionIntersectionDifference(n,t);return u.difference.length||delete u.difference,i.each(u,function(n,t){i.isArrayLike(n)&&(i.arraySame(e,n)?u[t]=void 0:1===n.length&&(u[t]=n[0]))}),u},t},rangeInclusive:function(n,e){var t={},o=function(n,e){var t={};return i.each(["intersection","difference","union"],function(i){n[i]&&(t[i]=n[i][e])}),n.count&&(t.count=n.count),t};return t[n]=function(t,i,r,u){if(void 0!==t){var f=c(r,u,n,e),s=o(f,0);return s.getSubset=function(n,e,t,i,r){return t},s.getUnion=function(n,e,t,i,r,o){return[t,i]},s}},t[e]=function(t,i,r,f){if(void 0!==t){var s=c(r,f,n,e),a=o(s,1);return a.getSubset=function(t,i,r,o,c){var f=u(t,i,n,e),s=f.sAv1,a=f.sAv2,v=f.sBv1;return e in i&&e in t?r.slice(s-v,a-v+1):r.slice(s,a+1)},a.getUnion=function(e,t,i,r,o,u){return s.meta.indexOf("after")>=0?(s.intersection&&(r=r.slice(0,s.intersection[0]-+t[n])),[r,i]):(s.intersection&&(i=i.slice(0,s.intersection[0]-+e[n])),[i,r])},a}},new r.Paginate(t)},"boolean":function(n){var e=new r.Where({});return e[n]=function(n,e){var t=!n,i=!e;return n===i&&e===t?{difference:!e,union:void 0}:void 0===n?{difference:!e,intersection:e,union:void 0}:void 0},e},sort:function(n,e){e||(e=i.defaultSort);var t={};return t[n]=e,new r.Order(t)},id:function(n){var e={};return e[n]=n,new r.Id(e)}}});
/*can-set@0.5.6#src/set*/
define("can-set@0.5.6#src/set",function(e,o,r){var s=e("./set-core"),t=e("./comparators");s.comparators=t,s.helpers=e("./helpers"),"undefined"==typeof window||e.resolve||(window.set=s),r.exports=s});
/*can-restless@0.4.0#lib/Params*/
define("can-restless@0.4.0#lib/Params",["exports","can/map/","can/list/","can/map/define/"],function(e,r,t){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0}),e.ParameterMap=e.SortMap=e.FilterList=e.FilterMap=e.FilterSerializers=void 0;var i=a(r),n=a(t),l=e.FilterSerializers={not_like:{operator:"not_like"},like:{operator:"like",serialize:function(e){return["%",e,"%"].join("")}},starts_with:{operator:"like",serialize:function(e){return[e,"%"].join("")}},ends_with:{operator:"like",serialize:function(e){return["%",e].join("")}},equals:{operator:"equals"},not_equal_to:{operator:"not_equal_to"},greater_than:{operator:">",serialize:function(e){return parseFloat(e)}},less_than:{operator:"<",serialize:function(e){return parseFloat(e)}},before:{operator:"<"},after:{operator:">"}},o=e.FilterMap=i["default"].extend({define:{name:{type:"string",value:""},operator:{serialize:!1,value:"like"},value:{serialize:!1},op:{type:"string",serialize:function(){var e=this.attr("operator"),r=l[e];return r&&(e=r.operator),e}},val:{serialize:function(){var e=this.attr("value");if(e&&this.attr("operator")){var r=l[this.attr("operator")];if(r&&r.serialize)return r.serialize(e)}return e}}}}),s=e.FilterList=n["default"].extend({Map:o},{}),u=e.SortMap=i["default"].extend({fieldName:null,type:"asc"}),p=e.ParameterMap=i["default"].extend({define:{sort:{Type:u,serialize:function(e){if(e){var r=e.attr("fieldName");if(r)return"asc"===e.attr("type")?r:"-"+r}}},filters:{Type:s,Value:s,serialize:!1},page:{type:"number",value:0,serialize:!1},perPage:{type:"number",value:10,serialize:!1},"filter[objects]":{serialize:function(e){var r=this.attr("filters");return r&&r.length?JSON.stringify(r.serialize()):void 0}},"page[number]":{serialize:function(){return this.attr("page")?this.attr("page")+1:void 0}},"page[size]":{serialize:function(){return this.attr("perPage")}}}});e["default"]=p});
/*can-connect@0.5.5#can/can*/
define("can-connect@0.5.5#can/can",function(n,i,c){var e=n("can/util/util");e.isPromise=e.isDeferred=function(n){return n&&(window.Promise&&n instanceof Promise||e.isFunction(n.then)&&e.isFunction(n["catch"]||n.fail))}});
/*can-connect@0.5.5#can/map/map*/
define("can-connect@0.5.5#can/map/map",function(t,n,e){t("when/es6-shim/Promise"),t("../can");var i=t("can/util/util"),r=t("can-connect"),s=t("can/list/list"),u=t("can/map/map");e.exports=r.behavior("can-map",function(t){var n={init:function(){this.Map=this.Map||u.extend({}),this.List=this.List||s.extend({}),p(this,this.Map,c,o),p(this,this.List,h,f),t.init.apply(this,arguments)},id:function(n){if(n instanceof i.Map){var e=[],r=this.algebra;if(r&&r.clauses&&r.clauses.id)for(var s in r.clauses.id)e.push(d(n,s));return this.idProp&&!e.length&&e.push(d(n,this.idProp)),e.length||e.push(d(n,"id")),e.length>1?e.join("@|@"):e[0]}return t.id(n)},serializeInstance:function(t){return t.serialize()},serializeList:function(t){return t.serialize()},instance:function(t){var n=this.Map||u;return new n(t)},list:function(t,n){var e=this.List||this.Map&&this.Map.List||s,r=new e(t.data);return i.each(t,function(t,n){"data"!==n&&r.attr(n,t)}),r.__listSet=n,r},updatedList:function(){i.batch.start();var n=t.updatedList.apply(this,arguments);return i.batch.stop(),n},save:function(n){n._saving=!0,i.batch.trigger(n,"_saving",[!0,!1]);var e=function(){n._saving=!1,i.batch.trigger(n,"_saving",[!1,!0])},r=t.save.apply(this,arguments);return r.then(e,e),r},destroy:function(n){n._destroying=!0,i.batch.trigger(n,"_destroying",[!0,!1]);var e=function(){n._destroying=!1,i.batch.trigger(n,"_destroying",[!1,!0])},r=t.destroy.apply(this,arguments);return r.then(e,e),r}};return i.each(["created","updated","destroyed"],function(t){n[t+"Instance"]=function(n,e){var r=n.constructor;e&&"object"==typeof e&&n.attr(i.isFunction(e.attr)?e.attr():e,this.constructor.removeAttr||!1),i.dispatch.call(n,{type:t,target:n}),i.dispatch.call(r,t,[n])}}),n});var a=!0,o={getList:function(t,n){return function(t){return n.getList(t)}},findAll:function(t,n){return function(t){return n.getList(t)}},get:function(t,n){return function(t){return n.get(t)}},findOne:function(t,n){return function(t){return n.get(t)}}},c={_bindsetup:function(t,n){return function(){return a=!1,n.addInstanceReference(this),a=!0,t.apply(this,arguments)}},_bindteardown:function(t,n){return function(){return a=!1,n.deleteInstanceReference(this),a=!0,t.apply(this,arguments)}},___set:function(t,n){return function(e,i){t.apply(this,arguments),e===n.idProp&&this._bindings&&n.addInstanceReference(this)}},isNew:function(t,n){return function(){var t=n.id(this);return!(t||0===t)}},isSaving:function(t,n){return function(){return i.__observe(this,"_saving"),!!this._saving}},isDestroying:function(t,n){return function(){return i.__observe(this,"_destroying"),!!this._destroying}},save:function(t,n){return function(t,e){var i=n.save(this);return i.then(t,e),i}},destroy:function(t,n){return function(t,e){var i;return this.isNew()?(i=Promise.resolve(this),n.destroyedInstance(this,{})):i=n.destroy(this),i.then(t,e),i}}},h={setup:function(t,n){return function(e){i.isPlainObject(e)&&!i.isArray(e)?(this.__listSet=e,t.apply(this),this.replace(i.isDeferred(e)?e:n.getList(e))):t.apply(this,arguments),this._init=1,this.bind("destroyed",i.proxy(this._destroyed,this)),delete this._init}},_destroyed:function(){return function(t,n){if(/\w+/.test(n))for(var e;(e=this.indexOf(t.target))>-1;)this.splice(e,1)}},_bindsetup:function(t,n){return function(){return n.addListReference(this),t.apply(this,arguments)}},_bindteardown:function(t,n){return function(){return n.deleteListReference(this),t.apply(this,arguments)}}},f={_bubbleRule:function(t,n){return function(n,e){var i=t(n,e);return i.push("destroyed"),i}}},d=function(t,n){return a&&i.__observe(t,n),t.__get(n)},p=function(t,n,e,i){var r;for(r in e)n.prototype[r]=e[r](n.prototype[r],t);if(i)for(r in i)n[r]=i[r](n[r],t)}});
/*can-connect@0.5.5#helpers/sorted-set-json*/
define("can-connect@0.5.5#helpers/sorted-set-json",function(n,e,r){var t=n("./helpers"),o=t.forEach,s=t.keys;r.exports=function(n){if(null==n)return n;var e={};return o.call(s(n).sort(),function(r){e[r]=n[r]}),JSON.stringify(e)}});
/*can-connect@0.5.5#constructor/store/store*/
define("can-connect@0.5.5#constructor/store/store",function(e,t,s){var n=e("can-connect"),i=e("can-connect/helpers/weak-reference-map"),r=e("can-connect/helpers/sorted-set-json");s.exports=n.behavior("constructor-store",function(e){var t={instanceStore:new i,listStore:new i,_requestInstances:{},_requestLists:{},_pendingRequests:0,_finishedRequest:function(){var e;if(this._pendingRequests--,0===this._pendingRequests){for(e in this._requestInstances)this.instanceStore.deleteReference(e);this._requestInstances={};for(e in this._requestLists)this.listStore.deleteReference(e);this._requestLists={}}},addInstanceReference:function(e,t){this.instanceStore.addReference(t||this.id(e),e)},addInstanceMetaData:function(e,t,s){var n=this.instanceStore.set[this.id(e)];n&&(n[t]=s)},getInstanceMetaData:function(e,t){var s=this.instanceStore.set[this.id(e)];return s?s[t]:void 0},deleteInstanceMetaData:function(e,t){var s=this.instanceStore.set[this.id(e)];delete s[t]},deleteInstanceReference:function(e){this.instanceStore.deleteReference(this.id(e),e)},addListReference:function(e,t){var s=r(t||this.listSet(e));s&&this.listStore.addReference(s,e)},deleteListReference:function(e,t){var s=r(t||this.listSet(e));s&&this.listStore.deleteReference(s,e)},hydratedInstance:function(e){if(this._pendingRequests>0){var t=this.id(e);this._requestInstances[t]||(this.addInstanceReference(e),this._requestInstances[t]=e)}},hydrateInstance:function(t){var s=this.id(t);if((s||0===s)&&this.instanceStore.has(s)){var n=this.instanceStore.get(s);return this.updatedInstance(n,t),n}var i=e.hydrateInstance.call(this,t);return this.hydratedInstance(i),i},hydratedList:function(e,t){if(this._pendingRequests>0){var s=r(t||this.listSet(e));s&&(this._requestLists[s]||(this.addListReference(e,t),this._requestLists[s]=e))}},hydrateList:function(t,s){s=s||this.listSet(t);var n=r(s);if(n&&this.listStore.has(n)){var i=this.listStore.get(n);return this.updatedList(i,t,s),i}var a=e.hydrateList.call(this,t,s);return this.hydratedList(a,s),a},getList:function(t){var s=this;s._pendingRequests++;var n=e.getList.call(this,t);return n.then(function(e){s._finishedRequest()},function(){s._finishedRequest()}),n},get:function(t){var s=this;s._pendingRequests++;var n=e.get.call(this,t);return n.then(function(e){s._finishedRequest()},function(){s._finishedRequest()}),n},save:function(t){var s=this;s._pendingRequests++;var n=!this.isNew(t);n&&this.addInstanceReference(t);var i=e.save.call(this,t);return i.then(function(e){n&&s.deleteInstanceReference(t),s._finishedRequest()},function(){s._finishedRequest()}),i},destroy:function(t){var s=this;s._pendingRequests++;var n=e.destroy.call(this,t);return n.then(function(e){s._finishedRequest()},function(){s._finishedRequest()}),n}};return t})});
/*can-connect@0.5.5#data/callbacks/callbacks*/
define("can-connect@0.5.5#data/callbacks/callbacks",function(a,t,c){var e=a("can-connect"),n=a("can-connect/helpers/"),r={getListData:"gotListData",createData:"createdData",updateData:"updatedData",destroyData:"destroyedData"};c.exports=e.behavior("data-callbacks",function(a){var t={};return n.each(r,function(c,e){t[e]=function(t,n){var r=this;return a[e].call(this,t).then(function(a){return r[c]?r[c].call(r,a,t,n):a})}}),t})});
/*can-connect@0.5.5#data/callbacks-cache/callbacks-cache*/
define("can-connect@0.5.5#data/callbacks-cache/callbacks-cache",function(a,c,e){var t=a("can-connect"),n=a("can-connect/helpers/"),o={createdData:"createData",updatedData:"updateData",destroyedData:"destroyData"};e.exports=t.behavior("data-callbacks-cache",function(a){var c={};return n.each(o,function(e,t){c[t]=function(c,o,r){return this.cacheConnection[e](n.extend({},c)),a[t].call(this,c,o,r)}}),c})});
/*can-connect@0.5.5#data/inline-cache/inline-cache*/
define("can-connect@0.5.5#data/inline-cache/inline-cache",function(e,t,n){var a=e("can-connect"),i=e("can-connect/helpers/sorted-set-json");n.exports=a.behavior("data-inline-cache",function(e){if("undefined"==typeof INLINE_CACHE)return{};var t=function(e){var t=INLINE_CACHE[this.name];if(t){var n=t[e];if(n)return delete t[e],n}};return{getListData:function(n){var a=i(n),c=t.call(this,a);return void 0!==c?(this.cacheConnection&&this.cacheConnection.updateListData(c,n),Promise.resolve(c)):e.getListData.apply(this,arguments)},getData:function(n){var a=this.id(n),i=t.call(this,a);return void 0!==i?(this.cacheConnection&&this.cacheConnection.updateData(i),Promise.resolve(i)):e.getData.apply(this,arguments)}}})});
/*can-connect@0.5.5#data/parse/parse*/
define("can-connect@0.5.5#data/parse/parse",function(a,t,e){var n=a("can-connect/helpers/").isArray,r=a("can-connect"),s=a("can-connect/helpers/");e.exports=r.behavior("data-parse",function(a){var t={parseListData:function(t){a.parseListData&&(t=a.parseListData.apply(this,arguments));var e;if(n(t))e={data:t};else{var r=this.parseListProp||"data";if(t.data=s.getObject(r,t),e=t,"data"!==r&&delete t[r],!n(e.data))throw new Error("Could not get any raw data while converting using .parseListData")}for(var c=[],p=0;p<e.data.length;p++)c.push(this.parseInstanceData(e.data[p]));return e.data=c,e},parseInstanceData:function(t){return a.parseInstanceData&&(t=a.parseInstanceData.apply(this,arguments)||t),this.parseInstanceProp?s.getObject(this.parseInstanceProp,t)||t:t}};return s.each(c,function(e,n){t[n]=function(t){var r=this;return a[n].call(this,t).then(function(){return r[e].apply(r,arguments)})}}),t});var c={getListData:"parseListData",getData:"parseInstanceData",createData:"parseInstanceData",updateData:"parseInstanceData",destroyData:"parseInstanceData"}});
/*can-connect@0.5.5#helpers/get-items*/
define("can-connect@0.5.5#helpers/get-items",function(e,n,t){var c=e("can-connect/helpers/").isArray;t.exports=function(e){return c(e)?e:e.data}});
/*can-connect@0.5.5#helpers/set-add*/
define("can-connect@0.5.5#helpers/set-add",function(e,n,c){var t=e("can-set");c.exports=function(e,n,c,i,r){var a=t.index(n,c,i,r);void 0===a&&(a=c.length);var s=c.slice(0);return s.splice(a,0,i),s}});
/*can-connect@0.5.5#helpers/get-index-by-id*/
define("can-connect@0.5.5#helpers/get-index-by-id",function(n,e,r){r.exports=function(n,e,r){for(var i=n.id(e),t=0;t<r.length;t++){var c=n.id(r[t]);if(i==c)return t}return-1}});
/*can-connect@0.5.5#data/localstorage-cache/localstorage-cache*/
define("can-connect@0.5.5#data/localstorage-cache/localstorage-cache",function(e,t,a){var s=e("can-connect/helpers/get-items"),n=e("can-connect"),r=e("can-connect/helpers/sorted-set-json"),i=e("can-set");e("when/es6-shim/Promise");var o=e("can-connect/helpers/"),c=o.forEach,l=o.map,h=e("can-connect/helpers/set-add"),g=e("can-connect/helpers/get-index-by-id");a.exports=n.behavior("data-localstorage-cache",function(e){var t={_instances:{},getSetData:function(){var e={},t=this;return c.call(JSON.parse(localStorage.getItem(this.name+"-sets"))||[],function(a){var s=r(a);localStorage.getItem(t.name+"/set/"+s)&&(e[s]={set:a,setKey:s})}),e},_getSets:function(e){var t=[];e=e||this.getSetData();for(var a in e)t.push(e[a].set);return t},getInstance:function(e){var t=localStorage.getItem(this.name+"/instance/"+e);return t?JSON.parse(t):void 0},getInstances:function(e){var t=this;return l.call(e,function(e){return t.getInstance(e)})},removeSet:function(e,t){var a=this.getSetData();localStorage.removeItem(this.name+"/set/"+e),delete a[e],t!==!0&&this.updateSets(a)},updateSets:function(e){var t=this._getSets(e);localStorage.setItem(this.name+"-sets",JSON.stringify(t))},updateSet:function(e,t,a){var s=a?r(a):e.setKey;if(a&&s!==e.setKey){var n=this.getSetData(),i=e.setKey;n[s]=e,e.setKey=s,this.removeSet(i)}e.items=t;var o=this,c=l.call(t,function(e){var t=o.id(e);return localStorage.setItem(o.name+"/instance/"+t,JSON.stringify(e)),t});localStorage.setItem(this.name+"/set/"+s,JSON.stringify(c))},addSet:function(e,t){var a=s(t),n=this.getSetData(),i=r(e);n[i]={setKey:i,items:a,set:e};var o=this,c=l.call(a,function(e){var t=o.id(e);return localStorage.setItem(o.name+"/instance/"+t,JSON.stringify(e)),t});localStorage.setItem(this.name+"/set/"+i,JSON.stringify(c)),this.updateSets(n)},_eachSet:function(e){var t=this.getSetData(),a=this,s=function(t,s){return e.call(a,t,s,function(){if(!("items"in t)){var e=JSON.parse(localStorage.getItem(a.name+"/set/"+s));t.items=a.getInstances(e)}return t.items})};for(var n in t){var r=t[n],i=s(r,n);if(void 0!==i)return i}},clear:function(){var e=this.getSetData();for(var t in e)localStorage.removeItem(this.name+"/set/"+t);localStorage.removeItem(this.name+"-sets");for(var a=[],s=0,n=localStorage.length;n>s;++s)0===localStorage.key(s).indexOf(this.name+"/instance/")&&a.push(localStorage.key(s));c.call(a,function(e){localStorage.removeItem(e)}),this._instances={}},getSets:function(){return Promise.resolve(this._getSets())},getListData:function(e){var t=r(e),a=this.getSetData()[t];if(a){var s=localStorage.getItem(this.name+"/set/"+t);if(s)return Promise.resolve({data:this.getInstances(JSON.parse(s))})}return Promise.reject({message:"no data",error:404})},getData:function(e){var t=this.id(e),a=localStorage.getItem(this.name+"/instance/"+t);return a?Promise.resolve(JSON.parse(a)):Promise.reject({message:"no data",error:404})},updateListData:function(e,t){var a=s(e),n=this.getSetData(),r=this;for(var o in n){var c=n[o],l=i.union(c.set,t,this.algebra);if(l)return this.getListData(c.set).then(function(e){r.updateSet(c,i.getUnion(c.set,t,s(e),a,this.algebra),l)})}return this.addSet(t,e),Promise.resolve()},createData:function(e){var t=this;this._eachSet(function(a,s,n){i.has(a.set,e,this.algebra)&&t.updateSet(a,h(t,a.set,n(),e,t.algebra),a.set)});var a=this.id(e);return localStorage.setItem(this.name+"/instance/"+a,JSON.stringify(e)),Promise.resolve({})},updateData:function(e){var t=this;this._eachSet(function(a,s,n){var r=n(),o=g(t,e,r);i.has(a.set,e,this.algebra)?-1===o?t.updateSet(a,h(t,a.set,n(),e,t.algebra)):(r.splice(o,1,e),t.updateSet(a,r)):-1!==o&&(r.splice(o,1),t.updateSet(a,r))});var a=this.id(e);return localStorage.setItem(this.name+"/instance/"+a,JSON.stringify(e)),Promise.resolve({})},destroyData:function(e){var t=this;this._eachSet(function(a,s,n){var r=n(),i=g(t,e,r);-1!==i&&(r.splice(i,1),t.updateSet(a,r))});var a=this.id(e);return localStorage.removeItem(this.name+"/instance/"+a),Promise.resolve({})}};return t})});
/*can-connect@0.5.5#real-time/real-time*/
define("can-connect@0.5.5#real-time/real-time",function(e,t,i){var a=e("../can-connect"),n=e("can-set"),s=e("can-connect/helpers/set-add"),r=e("can-connect/helpers/get-index-by-id");i.exports=a.behavior("real-time",function(e){return{createInstance:function(e){var t,i=this.id(e),a=this.instanceStore.get(i);if(a)return this.updateInstance(e);a=this.hydrateInstance(e),t=this.serializeInstance(a);var n=this;return this.addInstanceReference(a),Promise.resolve(this.createdData(e,t)).then(function(){return n.deleteInstanceReference(a),a})},createdData:function(e,t,i){var a;return a=void 0!==i?this.cidStore.get(i):this.instanceStore.get(this.id(e)),this.addInstanceReference(a,this.id(e)),this.createdInstance(a,e),c.call(this,this.serializeInstance(a)),void this.deleteInstanceReference(a)},updatedData:function(e,t){var i=this.instanceStore.get(this.id(t));return this.updatedInstance(i,e),void d.call(this,this.serializeInstance(i))},updateInstance:function(e){var t=this.id(e),i=this.instanceStore.get(t);i||(i=this.hydrateInstance(e)),this.addInstanceReference(i);var a=this.serializeInstance(i),n=this;return Promise.resolve(this.updatedData(e,a)).then(function(){return n.deleteInstanceReference(i),i})},destroyedData:function(e,t){var i=this.id(t||e),a=this.instanceStore.get(i);a||(a=this.hydrateInstance(e));var n=this.serializeInstance(a);return void h.call(this,n)},destroyInstance:function(e){var t=this.id(e),i=this.instanceStore.get(t);i||(i=this.hydrateInstance(e)),this.addInstanceReference(i);var a=this.serializeInstance(i),n=this;return Promise.resolve(this.destroyedData(e,a)).then(function(){return n.deleteInstanceReference(i),i})}}});var c=function(e){var t=this;this.listStore.forEach(function(i,a){var c=JSON.parse(a),d=r(t,e,i);if(n.has(c,e,t.algebra)&&-1===d){var h=t.serializeList(i);t.updatedList(i,{data:s(t,c,h,e,t.algebra)},c)}})},d=function(e){var t=this;this.listStore.forEach(function(i,a){var c,d=JSON.parse(a),h=r(t,e,i);if(n.has(d,e,t.algebra))if(c=t.serializeList(i),-1===h)t.updatedList(i,{data:s(t,d,c,e,t.algebra)},d);else{var o=n.index(d,c,e,t.algebra);if(void 0!==o&&o!==h){var l=c.slice(0);o>h?(l.splice(o,0,e),l.splice(h,1)):(l.splice(h,1),l.splice(o,0,e)),t.updatedList(i,{data:l},d)}}else-1!==h&&(c=t.serializeList(i),c.splice(h,1),t.updatedList(i,{data:c},d))})},h=function(e){var t=this;this.listStore.forEach(function(i,a){var n=JSON.parse(a),s=r(t,e,i);if(-1!==s){var c=t.serializeList(i);c.splice(s,1),t.updatedList(i,{data:c},n)}})}});
/*can-connect@0.5.5#fall-through-cache/fall-through-cache*/
define("can-connect@0.5.5#fall-through-cache/fall-through-cache",function(t,e,a){var n=t("can-connect"),c=t("../helpers/sorted-set-json");a.exports=n.behavior("fall-through-cache",function(t){var e={hydrateList:function(e,a){a=a||this.listSet(e);var n=c(a),s=t.hydrateList.call(this,e,a);return this._getHydrateListCallbacks[n]&&(this._getHydrateListCallbacks[n].shift()(s),this._getHydrateListCallbacks[n].length||delete this._getHydrateListCallbacks[n]),s},_getHydrateListCallbacks:{},_getHydrateList:function(t,e){var a=c(t);this._getHydrateListCallbacks[a]||(this._getHydrateListCallbacks[a]=[]),this._getHydrateListCallbacks[a].push(e)},getListData:function(e){var a=this;return this.cacheConnection.getListData(e).then(function(n){return a._getHydrateList(e,function(n){a.addListReference(n,e),setTimeout(function(){t.getListData.call(a,e).then(function(t){a.cacheConnection.updateListData(t,e),a.updatedList(n,t,e),a.deleteListReference(n,e)},function(t){console.log("REJECTED",t)})},1)}),n},function(){var n=t.getListData.call(a,e);return n.then(function(t){a.cacheConnection.updateListData(t,e)}),n})},hydrateInstance:function(e){var a=this.id(e),n=t.hydrateInstance.apply(this,arguments);return this._getMakeInstanceCallbacks[a]&&(this._getMakeInstanceCallbacks[a].shift()(n),this._getMakeInstanceCallbacks[a].length||delete this._getMakeInstanceCallbacks[a]),n},_getMakeInstanceCallbacks:{},_getMakeInstance:function(t,e){this._getMakeInstanceCallbacks[t]||(this._getMakeInstanceCallbacks[t]=[]),this._getMakeInstanceCallbacks[t].push(e)},getData:function(e){var a=this;return this.cacheConnection.getData(e).then(function(n){return a._getMakeInstance(a.id(n)||a.id(e),function(n){a.addInstanceReference(n),setTimeout(function(){t.getData.call(a,e).then(function(t){a.cacheConnection.updateData(t),a.updatedInstance(n,t),a.deleteInstanceReference(n)},function(t){console.log("REJECTED",t)})},1)}),n},function(){var n=t.getData.call(a,e);return n.then(function(t){a.cacheConnection.updateData(t)}),n})}};return e})});
/*can-connect@0.5.5#constructor/callbacks-once/callbacks-once*/
define("can-connect@0.5.5#constructor/callbacks-once/callbacks-once",function(n,a,t){var c=n("can-connect"),e=n("can-connect/helpers/sorted-set-json"),s=n("can-connect/helpers/"),r=["createdInstance","updatedInstance","destroyedInstance"];t.exports=c.behavior("constructor-callbacks-once",function(n){var a={};return s.forEach.call(r,function(t){a[t]=function(a,c){var s=this.getInstanceMetaData(a,"last-data"),r=e(c),o=e(this.serializeInstance(a));if(s!==r&&o!==r){var l=n[t].apply(this,arguments);return this.addInstanceMetaData(a,"last-data",r),l}}}),a})});
/*can-restless@0.4.0#lib/CanRestless*/
define("can-restless@0.4.0#lib/CanRestless",["exports","can/list/","can/map/","can-connect","can/util/library","can-set","./Params","can-connect/constructor/","can-connect/can/map/","can-connect/constructor/store/","can-connect/data/callbacks/","can-connect/data/callbacks-cache/","can-connect/data/inline-cache/","can-connect/data/parse/","can-connect/data/url/","can-connect/data/localstorage-cache/","can-connect/real-time/","can-connect/fall-through-cache/","can-connect/constructor/callbacks-once/"],function(a,t,e,n,r,c,o){"use strict";function s(a){return a&&a.__esModule?a:{"default":a}}function i(a){var t=(l["default"].extend({Map:a.map}),new f),e=a.idProp||"id",n=new h["default"].Algebra({"filter[objects]":function(){return console.log(arguments),!0}},h["default"].comparators.id(e),h["default"].comparators.rangeInclusive("page[number]"),h["default"].comparators.sort("sort")),r=d["default"](["data-localstorage-cache"],{name:a.name});return d["default"](["constructor","can-map","constructor-store","data-callbacks","data-callbacks-cache","data-inline-cache","data-parse","data-url","real-time","fall-through-cache","constructor-callbacks-once"],{cacheConnection:r,idProp:e,algebra:n,baseURL:a.url,metadata:t,Map:a.map,List:a.map.List,name:a.name,url:{resource:a.url,getListData:function(a){a=new o.ParameterMap(a);var e=p["default"].ajax({url:this.resource,headers:{Accept:"application/vnd.api+json"},method:"GET",data:a.serialize()});return e.then(function(a){t.attr("total",a.meta.total)}),e},getData:function(a){var t=p["default"].ajax({url:this.resource+"/"+a[e],headers:{Accept:"application/vnd.api+json"},method:"GET"});return t},createData:function(e){var n={};for(var r in e)e.hasOwnProperty(r)&&!t.attr("relationships."+r)&&(n[r]=e[r]);return p["default"].ajax({url:this.resource,headers:{Accept:"application/vnd.api+json","Content-Type":"application/vnd.api+json"},data:JSON.stringify({data:{attributes:n,type:a.name}}),method:"POST"})},updateData:function(n){var r={};for(var c in n)n.hasOwnProperty(c)&&!t.attr("relationships."+c)&&(r[c]=n[c]);return p["default"].ajax({url:this.resource+"/"+n[e],headers:{Accept:"application/vnd.api+json","Content-Type":"application/vnd.api+json"},data:JSON.stringify({data:{attributes:r,type:a.name,id:n[e]}}),method:"PATCH"})},destroyData:function(a){return p["default"].ajax({url:this.resource+"/"+a[e],headers:{Accept:"application/vnd.api+json","Content-Type":"application/vnd.api+json"},method:"DELETE"})}},parseListProp:"data",parseInstanceData:function(a){if(!a)return{};a.data&&(a=a.data);var e=a.attributes;e.id=a[this.idProp],p["default"].batch.start();for(var n in a.relationships)a.relationships.hasOwnProperty(n)&&a.relationships[n].hasOwnProperty("data")&&(e[n]=Array.isArray(a.relationships[n].data)?a.relationships[n].data.map(function(a){return a.id}):a.relationships[n].data?a.relationships[n].data.id:null,t.attr("relationships."+n,!0));return p["default"].batch.stop(),e}})}Object.defineProperty(a,"__esModule",{value:!0}),a.ConnectionFactory=i;var l=s(t),u=s(e),d=s(n),p=s(r),h=s(c),f=u["default"].extend({define:{total:{type:"number",value:0},relationships:{Value:u["default"]}}})});
/*can-restless@0.4.0#index*/
define("can-restless@0.4.0#index",["exports","can-restless/lib/CanRestless"],function(e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=s.ConnectionFactory});
/*can-crud-app@1.0.0#config/flask/Article*/
define("can-crud-app@1.0.0#config/flask/Article",["exports","can/map/","can-restless","can/route/","pubsub-js","can-crud/crud-manager/"],function(e,t,a,r,i,l){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0}),e.Article=void 0;var u=n(t),c=n(a),s=n(r),o=n(i),d=e.Article=c["default"]({url:"/api/article",name:"article",map:u["default"].extend({define:{author_id:{type:"number",formatter:function(e){return'<a  href="'+s["default"].url({view:"people_basic",page:"details",objectId:e})+'">Author: '+e+"</a>"}},title:{type:"string"},content:{type:"string",excludeListTable:!0,properties:{textarea:!0}},author:{serialize:!1,excludeListTable:!0,excludePropertyTable:!0,excludeForm:!0,excludeFilter:!0,set:function(e){return this.attr("author_id",e),e}},reviewed:{type:"integer",value:0,formatter:function(e){return'<i class="fa fa-'+(e?"check":"square-o")+'"></i>'},fieldType:"select",properties:{options:[{label:"Yes",value:1},{label:"No",value:0}]}}}})});e["default"]={connection:d,title:"Article",manageButtons:[{iconClass:"fa fa-check",buttonClass:"success",text:"Mark Reviewed",onClick:function(e){e.forEach(function(e){e.attr("reviewed",1),d.save(e).then(function(){o["default"].publish(l.TOPICS.ADD_MESSAGE,{message:"Item saved: ",detail:"ID: "+e.attr("id")})})})}}]}});